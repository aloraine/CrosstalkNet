module.exports = {
    createEdges: function(epiNodes, stromaNodes, weights) {
        var edges = [];

        for (var i = 0; i < epiNodes.length; i++) {
            for (var j = 0; j < stromaNodes.length; j++) {
                var id = "";

                var fromGene = epiNodes[i].data.id.slice(0, -2);
                var toGene = stromaNodes[j].data.id.slice(0, -2);

                if (weights[i][j] != 0) {
                    if (fromGene == toGene) {
                        id = "selfLoop"
                    } else {
                        id = "interaction"
                    }

                    edges.push({
                        data: {
                            id: id + fromGene + toGene,
                            source: epiNodes[i].data.id,
                            target: stromaNodes[j].data.id,
                            weight: weights[i][j]
                        }
                    });
                }
            }
        }

        return edges;
    },
    createEdgesFromNode: function(node, neighbours, weights) {
        var edges = [];
        var idPrefix = node.data.id.endsWith('-E') ? "EpiToStroma" : "StromaToEpi";
        for (var i = 0; i < neighbours.length; i++) {
            if (node.data.id)
                edges.push({
                    data: {
                        id: idPrefix + neighbours[i].data.id.slice(0, -2),
                        source: node.data.id,
                        target: neighbours[i].data.id,
                        weight: weights[i]
                    }
                })
        }

        return edges;
    },
    createEdgesFromREdgesFinal: function(REdges, neighbourLevel) {
        var edges = [];

        for (var i = 0; i < REdges.length; i++) {
            var source = REdges[i].source;
            var target = REdges[i].target;
            var weight = REdges[i].weight;

            edges.push({
                data: {
                    id: source + target,
                    source: source,
                    target: target,
                    weight: weight,
                    neighbourLevel: neighbourLevel
                }
            });
        }

        return edges;
    }
};
